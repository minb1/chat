<!DOCTYPE html>
<html lang="nl"> <!-- Taalattribuut ingesteld op Nederlands -->
<head>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="generator" content="ReSpec 35.2.2">
    <title>NLGov REST API Design Rules 2.0.2</title>

    <!-- Original Styles -->
    <style>
        .issue-label{text-transform:initial}
        .warning>p:first-child{margin-top:0}
        .warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
        span.warning{padding:.1em .5em .15em}
        .issue.closed span.issue-number{text-decoration:line-through}
        .issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
        .warning{border-color:#f11;border-color:var(--warning-border,#f11);border-width:.2em;border-style:solid;background:#fbe9e9;background:var(--warning-bg,#fbe9e9);color:#000;color:var(--text,#000)}
        .warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
        li.task-list-item{list-style:none}
        input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
        .issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
    </style>
    <style>
        dfn{cursor:pointer}
        .dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
        .dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
        .dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
        .dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
        .dfn-panel *{margin:0}
        .dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
        .dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
        .dfn-panel>div{display:flex}
        .dfn-panel a.self-link{font-weight:700;margin-right:auto}
        .dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
        .dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
        .dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
        .dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
        .dfn-panel a[href]:hover{border-bottom-width:1px}
        .dfn-panel ul{padding:0}
        .dfn-panel li{margin-left:1em}
        .dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
    </style>
    <link href="./media/style.css" rel="stylesheet" type="text/css">
    <link href="https://gitdocumentatie.logius.nl/publicatie/respec/style/logos/logius.ico" rel="shortcut icon" type="image/x-icon">
    <style id="respec-mainstyle">
        @keyframes pop{
        0%{transform:scale(1,1)}
        25%{transform:scale(1.25,1.25);opacity:.75}
        100%{transform:scale(1,1)}
        }
        a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
        a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
        a.bibref{text-decoration:none}
        .respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
        .respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
        @supports not (text-decoration:red wavy underline){
        .respec-offending-element:not(pre){display:inline-block}
        .respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
        }
        #references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
        cite .bibref{font-style:normal}
        a[href].orcid{padding-left:4px;padding-right:4px}
        a[href].orcid>svg{margin-bottom:-2px}
        ol.tof,ul.tof{list-style:none outside none}
        .caption{margin-top:.5em;font-style:italic}
        #issue-summary>ul{column-count:2}
        #issue-summary li{list-style:none;display:inline-block}
        details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
        details.respec-tests-details>*{padding-right:2em}
        details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
        details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
        details.respec-tests-details>ul{width:100%;margin-top:-.3em}
        details.respec-tests-details>li{padding-left:1em}
        .self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
        aside.example .marker>a.self-link{color:inherit}
        .header-wrapper{display:flex;align-items:baseline;position:relative;left:-.5em}
        :is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-.7em;font-size:1rem;opacity:.5}
        :is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
        :is(h2,h3)+a.self-link{top:-.2em}
        :is(h4,h5,h6)+a.self-link::before{color:#000}
        @media (max-width:767px){
        dd{margin-left:0}
        }
        @media print{
        .removeOnSave{display:none}
        }
    </style>
    <style id="respec-nlgov">
        img.license{float:left;padding-right:5px}
    </style>
    <meta name="color-scheme" content="light">
    <meta name="description" content="This document contains a normative standard for designing APIs in the Dutch Public Sector.
The Governance of this standard is described by the API-Standaarden beheermodel in a separate repository and published by Logius.
This document is part of the Nederlandse API Strategie, which consists of a set of documents.">
    <style>
        .hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
        @media (prefers-color-scheme:dark){
        .hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
        }
        .hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
        .hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
        .hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
        .hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
        .hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
        .hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
        .hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
        .hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
        .hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
        .hljs-emphasis{font-style:italic}
        .hljs-strong{font-weight:700}
        .hljs-link{text-decoration:underline}
    </style>
    <style>
        .sidelabel {
            position: fixed;
            -webkit-transform-origin: top right;
            right: 100%;
            top: 0;
            -webkit-transform: rotate(-90deg);
            padding: 4px 50px 4px 10px;
            color: white;
            white-space: nowrap;
            z-index: 1;
            background-color: #154273; /* Logius Blue */
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
        "nl_organisationName": "Logius",
        "nl_organisationStylesURL": "https://gitdocumentatie.logius.nl/publicatie/respec/style/",
        "nl_organisationPublishURL": "https://gitdocumentatie.logius.nl/publicatie/",
        "logos": [
            {
            "src": "https://gitdocumentatie.logius.nl/publicatie/respec/style/logos/figure-logius.svg",
            "alt": "Logius",
            "id": "Logius",
            "height": 77,
            "width": 44,
            "url": "https://www.logius.nl/onze-dienstverlening/standaarden"
            }
        ],
        "latestVersion": [
            "nl_organisationPublishURL",
            "pubDomain",
            "/",
            "shortName",
            "/"
        ],
        "thisVersion": [
            "nl_organisationPublishURL",
            "pubDomain",
            "/",
            "shortName",
            "/",
            "publishVersion",
            "/"
        ],
        "prevVersion": [
            "nl_organisationPublishURL",
            "pubDomain",
            "/",
            "shortName",
            "/",
            "previousPublishVersion",
            "/"
        ],
        "useLogo": true,
        "useLabel": true,
        "license": "cc-by",
        "addSectionLinks": true,
        "localizationStrings": {
            "en": {
            "wv": "Draft",
            "cv": "Consultation version",
            "vv": "Proposed version",
            "def": "Definitive version",
            "basis": "Document",
            "eo": "Outdated version",
            "tg": "Rescinded version",
            "no": "Norm",
            "st": "Standard",
            "im": "Information model",
            "pr": "Guideline",
            "hr": "Guide",
            "wa": "Proposed recommendation",
            "al": "General",
            "bd": "Governance documentation",
            "bp": "Best practice"
            },
            "nl": {
            "wv": "Werkversie",
            "cv": "Consultatieversie",
            "vv": "Versie ter vaststelling",
            "def": "Vastgestelde versie",
            "basis": "Document",
            "eo": "Verouderde versie",
            "tg": "Teruggetrokken versie",
            "no": "Norm",
            "st": "Standaard",
            "im": "Informatiemodel",
            "pr": "Praktijkrichtlijn",
            "hr": "Handreiking",
            "wa": "Werkafspraak",
            "al": "Algemeen",
            "bd": "Beheerdocumentatie",
            "bp": "Best practice"
            }
        },
        "sotdText": {
            "nl": {
            "sotd": "Status van dit document",
            "def": "Dit is de definitieve versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
            "wv": "Dit is een werkversie die op elk moment kan worden gewijzigd, verwijderd of vervangen door andere documenten. Het is geen door het TO goedgekeurde consultatieversie.",
            "cv": "Dit is een door het TO goedgekeurde consultatieversie. Commentaar over dit document kan gestuurd worden naar digikoppeling@logius.nl",
            "vv": "Dit is een definitief concept van de nieuwe versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
            "basis": "Dit is een document zonder officiële status."
            },
            "en": {
            "sotd": "Status of This Document",
            "def": "This is the definitive version of this document. Edits resulting from consultations have been applied.",
            "wv": "This is a draft that could be altered, removed or replaced by other documents. It is not a recommendation approved by TO.",
            "cv": "This is a proposed recommendation approved by TO. Comments regarding this document may be sent to api@logius.nl",
            "vv": "This is the definitive concept of this document. Edits resulting from consultations have been applied.",
            "basis": "This document has no official standing."
            }
        },
        "labelColor": {
            "def": "#154273", /* Logius Blue */
            "wv": "#39870c",
            "cv": "#000000",
            "vv": "#000000"
        },
        "licenses": {
            "cc0": {
            "name": "Creative Commons 0 Public Domain Dedication",
            "short": "CC0",
            "url": "https://creativecommons.org/publicdomain/zero/1.0/",
            "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-zero.svg"
            },
            "cc-by": {
            "name": "Creative Commons Attribution 4.0 International Public License",
            "short": "CC-BY",
            "url": "https://creativecommons.org/licenses/by/4.0/legalcode",
            "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by.svg"
            },
            "cc-by-nd": {
            "name": "Creative Commons Naamsvermelding-GeenAfgeleideWerken 4.0 Internationaal",
            "short": "CC-BY-ND",
            "url": "https://creativecommons.org/licenses/by-nd/4.0/legalcode.nl",
            "image": "https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by-nd.svg"
            }
        },
        "localBiblio": {
            /* Bibliography entries omitted for brevity */
            "ADR": {}, "ADR-ext": {}, "Algemene Voorwaarden Logius": {}, "AVG": {}, "BCP195": {}, "DK-beveiliging": {}, "CloudEvents": {}, "NLGOV-CloudEvents": {}, "DK-CV": {}, "DK-Portaal": {}, "DK-WUS-voorbeeld": {}, "Deployment Guide 1.1": {}, "DK": {}, "DK-Doc": {}, "DK-Beheermodel": {}, "DK-BPebMS": {}, "DK-BPGB": {}, "DK-BPWUS": {}, "DK-Beveiliging": {}, "DK-gbachtcert": {}, "DK-ebMS": {}, "DK-GB": {}, "DK-WUS": {}, "DK-RESTAPI": {}, "DK-Architectuur": {}, "DK-IDAuth": {}, "DK-WI": {}, "BOMOSFundament": {}, "BOMOSVerdieping": {}, "ebCPP": {}, "ebMS3": {}, "eDelivery API4IPS": {}, "Expert": {}, "folmer2011": {}, "folmer2012": {}, "DK-Gebruiksvoorwaarden": {}, "ADR-GEO": {}, "HTTPS-factsheet NCSC": {}, "iGOV.OpenID": {}, "NLGOV.OpenID": {}, "Introspection": {}, "JWA": {}, "JWE": {}, "JWK": {}, "JWS": {}, "JWT": {}, "NCSC 2019": {}, "NCSC 2021": {}, "NEN3610": {}, "no-Reliable-messaging": {}, "OAuth2": {}, "OpenID.Core": {}, "OpenID.Discovery": {}, "Pas-toe-of-leg-uit": {}, "PKIO-PvE": {}, "PKI-CA": {}, "PKIoverheid": {}, "PKIO-Cert": {}, "SemVer": {}, "ADR-TS": {}, "UMMR10": {}, "UMMUG": {}, "UUID": {}, "DK-Voorwaarden": {}, "X520": {}, "ADR-Validator": {}, "JRC117836": {}, "Krechmer2002": {}, "FSC-Core": {}, "FSC-Logging": {}
        },
        "alternateFormats": [
            {
            "label": "pdf",
            "uri": "API-Design-Rules.pdf"
            }
        ],
        "authors": [
            {
            "company": "Het Kadaster",
            "companyURL": "https://www.kadaster.nl",
            "name": "Jasper Roes"
            },
            {
            "company": "Het Kadaster",
            "companyURL": "https://www.kadaster.nl",
            "name": "Joost Farla"
            }
        ],
        "editors": [
            {
            "company": "Geonovum",
            "companyURL": "https://www.geonovum.nl",
            "name": "Frank Terpstra"
            },
            {
            "company": "Geonovum",
            "companyURL": "https://www.geonovum.nl",
            "name": "Jan van Gelder"
            },
            {
            "company": "Logius",
            "companyURL": "https://www.logius.nl",
            "name": "Alexander Green"
            },
            {
            "company": "Logius",
            "companyURL": "https://www.logius.nl",
            "name": "Martin van der Plas"
            }
        ],
        "github": "https://github.com/Logius-standaarden/API-Design-Rules",
        "pubDomain": "api",
        "publishDate": "2025-02-17",
        "publishVersion": "2.0.2",
        "previousPublishDate": "2025-01-07",
        "previousPublishVersion": "2.0.1",
        "shortName": "adr",
        "specStatus": "def",
        "specType": "ST",
        "pluralize": true
    }</script>
    <link rel="stylesheet" href="https://gitdocumentatie.logius.nl/publicatie/respec/style/base.css">

    <!-- START: Chat Sidebar CSS -->
    <style>
        /* Chat Sidebar Styles - Enhanced for Digitoegankelijkheid and NL Overheid Look & Feel */
        :root {
            --nl-rijkshuisstijl-blauw: #0058a8; /* Rijkshuisstijl Primary Blue (example, Logius Blue #154273 is darker) */
            --nl-logius-blauw: #154273;
            --nl-tekst-kleur: #242424; /* Dark grey for text (WCAG AAA on white) */
            --nl-tekst-kleur-licht: #555555;
            --nl-achtergrond-kleur: #ffffff;
            --nl-grijs-achtergrond: #f5f5f5;
            --nl-grijs-border: #d1d1d1;
            --nl-grijs-border-input: #b0b0b0; /* Slightly darker for input fields */
            --nl-focus-kleur: var(--nl-logius-blauw); /* Use primary blue for focus */
            --nl-focus-outline-width: 2px;
            --nl-fout-rood-achtergrond: #fbe9e9; /* Was #f8d7da */
            --nl-fout-rood-tekst: #701919; /* Was #721c24. Darker for better contrast. */
            --nl-fout-rood-border: #d48c80; /* Was #f5c6cb */
            --nl-gebruiker-bericht-achtergrond: #e6f2ff; /* Light blue */
            --nl-gebruiker-bericht-tekst: var(--nl-logius-blauw);
            --nl-lettertype: inherit; /* Inherit from page, often "Rijksoverheid Sans" on gov sites */
            --nl-font-grootte-basis: 0.95em; /* Approx 15.2px if base is 16px */
            --nl-font-grootte-klein: 0.85em; /* For disclaimer, sources subheader */
            --nl-border-radius: 4px; /* Consistent border radius */
        }

        #chat-toggle-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 56px; /* Slightly larger for touch target */
            height: 56px;
            background-color: var(--nl-logius-blauw);
            color: var(--nl-achtergrond-kleur);
            border: none;
            border-radius: 50%;
            font-size: 28px; /* Larger icon */
            line-height: 56px;
            text-align: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
            transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }
        #chat-toggle-button:hover,
        #chat-toggle-button:focus-visible { /* Use focus-visible for keyboard users */
            transform: scale(1.05);
            background-color: #103154; /* Darker shade */
        }
        #chat-toggle-button:focus-visible {
             outline: var(--nl-focus-outline-width) solid var(--nl-focus-kleur);
             outline-offset: 2px;
        }
        #chat-toggle-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: scale(1);
            box-shadow: none;
        }

        #chat-sidebar {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 750px;
            max-width: min(90vw, 750px); /* Ensure it doesn't exceed 750px but also responsive */
            background-color: var(--nl-achtergrond-kleur);
            box-shadow: -4px 0 8px rgba(0,0,0,0.15);
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--nl-grijs-border);
            font-family: var(--nl-lettertype);
        }
        #chat-sidebar.is-open {
            transform: translateX(0);
        }

        #chat-header {
            padding: 12px 16px;
            background-color: var(--nl-grijs-achtergrond);
            border-bottom: 1px solid var(--nl-grijs-border);
            font-weight: 600; /* Slightly bolder for header */
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--nl-tekst-kleur);
            font-size: 1.05em;
        }

        #chat-close-button {
            background: none;
            border: none;
            font-size: 28px; /* Larger icon */
            line-height: 1;
            cursor: pointer;
            padding: 4px; /* Make clickable area slightly larger */
            color: var(--nl-tekst-kleur-licht);
            border-radius: var(--nl-border-radius);
        }
        #chat-close-button:hover,
        #chat-close-button:focus-visible {
             color: var(--nl-tekst-kleur);
             background-color: rgba(0,0,0,0.05);
        }
        #chat-close-button:focus-visible {
             outline: var(--nl-focus-outline-width) solid var(--nl-focus-kleur);
             outline-offset: 1px;
        }

        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 16px;
            background-color: var(--nl-achtergrond-kleur);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message {
            padding: 10px 14px;
            border-radius: var(--nl-border-radius);
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.6; /* Improved line spacing for gov style */
            font-size: var(--nl-font-grootte-basis);
        }

        .user-message {
            background-color: var(--nl-gebruiker-bericht-achtergrond);
            color: var(--nl-gebruiker-bericht-tekst);
            align-self: flex-end;
            border-bottom-right-radius: 0; /* Keep chat bubble feel */
        }

        .assistant-message {
            background-color: var(--nl-grijs-achtergrond);
            color: var(--nl-tekst-kleur);
            align-self: flex-start;
            border-bottom-left-radius: 0; /* Keep chat bubble feel */
        }

        .error-message {
            background-color: var(--nl-fout-rood-achtergrond);
            color: var(--nl-fout-rood-tekst);
            border: 1px solid var(--nl-fout-rood-border);
            align-self: center;
            width: calc(100% - 16px); /* Slightly less than full width */
            text-align: center;
            padding: 12px; /* More padding for errors */
            margin: 8px 0;
        }

        #chat-input-area {
            display: flex;
            padding: 12px 16px;
            border-top: 1px solid var(--nl-grijs-border);
            background-color: var(--nl-grijs-achtergrond);
        }

        #chat-input {
            flex-grow: 1;
            padding: 10px 12px;
            border: 1px solid var(--nl-grijs-border-input);
            border-radius: var(--nl-border-radius);
            margin-right: 8px;
            resize: none;
            min-height: 44px; /* Standard height for form elements */
            max-height: 120px;
            overflow-y: auto;
            box-sizing: border-box;
            font-family: var(--nl-lettertype);
            font-size: 1em; /* Typically 16px if base is 16px */
            color: var(--nl-tekst-kleur);
        }
        #chat-input::placeholder {
            color: var(--nl-tekst-kleur-licht); /* Ensure placeholder text has enough contrast */
            opacity: 1; /* Firefox needs this */
        }
        #chat-input:focus-visible {
            outline: none;
            border-color: var(--nl-focus-kleur);
            box-shadow: 0 0 0 var(--nl-focus-outline-width) var(--nl-focus-kleur);
        }

        #chat-send-button { /* Optional send button styling */
            padding: 0 16px;
            height: 44px; /* Match input height */
            background-color: var(--nl-logius-blauw);
            color: var(--nl-achtergrond-kleur);
            border: none;
            border-radius: var(--nl-border-radius);
            cursor: pointer;
            transition: background-color 0.2s;
            line-height: 44px;
            font-weight: 500;
        }
        #chat-send-button:hover,
        #chat-send-button:focus-visible {
            background-color: #103154; /* Darker shade */
        }
        #chat-send-button:focus-visible {
            outline: var(--nl-focus-outline-width) solid var(--nl-focus-kleur);
            outline-offset: 1px;
        }
        #chat-send-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .loader {
            border: 4px solid #e0e0e0; /* Lighter grey for track */
            border-top: 4px solid var(--nl-logius-blauw);
            border-radius: 50%;
            width: 28px; /* Slightly larger */
            height: 28px;
            animation: spin 1s linear infinite;
            margin: 12px auto;
            align-self: center;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- Sources Popup Styles --- */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.65); /* Slightly darker overlay */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1005;
            padding: 20px;
            box-sizing: border-box;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s linear 0.3s;
        }
        .popup-overlay.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease, visibility 0s linear 0s;
        }

        .popup-content {
            background-color: var(--nl-achtergrond-kleur);
            padding: 24px; /* Consistent padding */
            border-radius: var(--nl-border-radius);
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 6px 18px rgba(0,0,0,0.2);
            color: var(--nl-tekst-kleur);
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .popup-overlay.visible .popup-content {
             transform: scale(1);
        }

        .popup-content h3 { /* Title for "Bronnen" */
            margin-top: 0;
            margin-bottom: 20px;
            color: var(--nl-logius-blauw);
            border-bottom: 2px solid var(--nl-logius-blauw);
            padding-bottom: 12px;
            font-size: 1.4em; /* Larger title for popup */
            font-weight: 600;
        }

        #sources-popup-close { /* Close button for popup */
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 30px; /* Prominent close icon */
            line-height: 1;
            cursor: pointer;
            color: var(--nl-tekst-kleur-licht);
            padding: 5px;
            border-radius: var(--nl-border-radius);
        }
        #sources-popup-close:hover,
        #sources-popup-close:focus-visible {
            color: var(--nl-tekst-kleur);
            background-color: rgba(0,0,0,0.05);
        }
         #sources-popup-close:focus-visible {
            outline: var(--nl-focus-outline-width) solid var(--nl-focus-kleur);
            outline-offset: 1px;
        }

        #sources-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #sources-list li {
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--nl-grijs-border);
        }
        #sources-list li:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .source-item-title {
            font-size: 1.15em; /* Slightly larger source titles */
            font-weight: 600;
            color: var(--nl-tekst-kleur);
            margin-bottom: 6px;
        }
        .source-item-subheader {
            font-size: var(--nl-font-grootte-klein);
            color: var(--nl-tekst-kleur-licht);
            margin-top: -4px;
            margin-bottom: 10px;
            font-style: italic;
        }
        .source-item-snippet {
            font-size: var(--nl-font-grootte-basis);
            line-height: 1.6;
            color: var(--nl-tekst-kleur);
            margin-bottom: 12px;
        }
        .source-item-link {
            display: inline-block;
            font-size: var(--nl-font-grootte-basis);
            color: var(--nl-logius-blauw);
            text-decoration: underline; /* Standard link underline */
            text-decoration-thickness: 1px; /* Subtle underline */
            text-underline-offset: 2px; /* Space between text and underline */
            padding-top: 4px;
            font-weight: 500;
        }
        .source-item-link:hover,
        .source-item-link:focus-visible {
            text-decoration: none; /* Remove underline on hover/focus if desired, or make solid */
             border-bottom: 2px solid var(--nl-logius-blauw);
        }
        .source-item-link:focus-visible {
             background-color: rgba(21,66,115,0.1); /* Light blue bg on focus */
             outline: none; /* Use border or bg for focus */
        }
        .source-item-no-link {
             font-size: var(--nl-font-grootte-basis);
             color: var(--nl-tekst-kleur-licht);
             font-style: italic;
             display: block;
             padding-top: 4px;
        }

        /* Button to trigger the sources popup */
        .view-sources-button {
            display: inline-block;
            margin-top: 12px; /* More space above */
            margin-left: auto;
            padding: 8px 14px; /* Slightly larger padding */
            font-size: var(--nl-font-grootte-klein);
            background-color: var(--nl-achtergrond-kleur);
            color: var(--nl-logius-blauw);
            border: 1px solid var(--nl-logius-blauw);
            border-radius: var(--nl-border-radius);
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            font-weight: 600;
            text-transform: none; /* No uppercase for softer look */
            letter-spacing: 0;
        }
        .view-sources-button:hover,
        .view-sources-button:focus-visible {
            background-color: var(--nl-logius-blauw);
            color: var(--nl-achtergrond-kleur);
        }
         .view-sources-button:focus-visible {
             outline: var(--nl-focus-outline-width) solid var(--nl-focus-kleur);
             outline-offset: 1px;
        }

        /* --- AI Disclaimer Styles --- */
        #chat-disclaimer {
            font-size: var(--nl-font-grootte-klein); /* Small but legible */
            color: var(--nl-tekst-kleur-licht);
            text-align: center;
            padding: 10px 16px;
            border-top: 1px solid var(--nl-grijs-border);
            background-color: var(--nl-grijs-achtergrond);
            line-height: 1.4;
        }
        #chat-disclaimer p {
             margin: 0 0 4px 0;
        }
        #chat-disclaimer p:last-child {
             margin-bottom: 0;
        }
    </style>
    <!-- END: Chat Sidebar CSS -->

</head>

<body class="h-entry toc-inline">
    <div class="head">
        <a class="logo" href="https://www.logius.nl/onze-dienstverlening/standaarden"><img alt="Logius" height="77" id="Logius" src="https://gitdocumentatie.logius.nl/publicatie/respec/style/logos/figure-logius.svg" width="44">
      </a> <h1 id="title" class="title">NLGov REST API Design Rules 2.0.2</h1>

        <h2>
          Logius Standard<br>
          Definitive version
          <time class="dt-published" datetime="2025-02-17">February 17, 2025</time>
        </h2>
        <dl>
          <dt>This version:</dt><dd class="status">
                  <a class="u-url status" href="https://gitdocumentatie.logius.nl/publicatie/api/adr/2.0.2/">https://gitdocumentatie.logius.nl/publicatie/api/adr/2.0.2/</a>
                </dd>
          <dt>Latest published version:</dt><dd>
                  <a href="https://gitdocumentatie.logius.nl/publicatie/api/adr/">https://gitdocumentatie.logius.nl/publicatie/api/adr/</a>
                </dd>
          <dt>Latest editor's draft:</dt><dd><a href="https://logius-standaarden.github.io/API-Design-Rules/">https://logius-standaarden.github.io/API-Design-Rules/</a></dd>



          <dt>Previous version:</dt><dd><a href="https://gitdocumentatie.logius.nl/publicatie/api/adr/2.0.1/">https://gitdocumentatie.logius.nl/publicatie/api/adr/2.0.1/</a></dd>

          <dt>Editors:</dt>
          <dd class="editor p-author h-card vcard">
        <span class="p-name fn">Frank Terpstra</span> (<a class="p-org org h-org" href="https://www.geonovum.nl">Geonovum</a>)
      </dd><dd class="editor p-author h-card vcard">
        <span class="p-name fn">Jan van Gelder</span> (<a class="p-org org h-org" href="https://www.geonovum.nl">Geonovum</a>)
      </dd><dd class="editor p-author h-card vcard">
        <span class="p-name fn">Alexander Green</span> (<a class="p-org org h-org" href="https://www.logius.nl">Logius</a>)
      </dd><dd class="editor p-author h-card vcard">
        <span class="p-name fn">Martin van der Plas</span> (<a class="p-org org h-org" href="https://www.logius.nl">Logius</a>)
      </dd>

          <dt>Authors:</dt><dd class="editor p-author h-card vcard">
        <span class="p-name fn">Jasper Roes</span> (<a class="p-org org h-org" href="https://www.kadaster.nl">Het Kadaster</a>)
      </dd><dd class="editor p-author h-card vcard">
        <span class="p-name fn">Joost Farla</span> (<a class="p-org org h-org" href="https://www.kadaster.nl">Het Kadaster</a>)
      </dd>
          <dt>Participate:</dt><dd>
        <a href="https://github.com/Logius-standaarden/API-Design-Rules/">GitHub Logius-standaarden/API-Design-Rules</a>
      </dd><dd>
        <a href="https://github.com/Logius-standaarden/API-Design-Rules/issues/">File an issue</a>
      </dd><dd>
        <a href="https://github.com/Logius-standaarden/API-Design-Rules/commits/">Commit history</a>
      </dd><dd>
        <a href="https://github.com/Logius-standaarden/API-Design-Rules/pulls/">Pull requests</a>
      </dd>
        </dl>


        <p>
              This document is also available in these non-normative format:
              <a rel="alternate" href="API-Design-Rules.pdf">pdf</a>
            </p>
        <p class="copyright">
                This document is licensed under
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/legalcode" class="subfoot"><img class="license" src="https://gitdocumentatie.logius.nl/publicatie/respec/media/logos/cc-by.svg" alt="Logo Creative Commons Attribution 4.0 International Public License"><br> Creative Commons Attribution 4.0 International Public License</a>
              </p>
        <hr title="Separator for header">
      </div>
    <section id="abstract" class="introductory"><h2>Abstract</h2><p>This document contains a normative standard for designing APIs in the Dutch Public Sector.
        <a href="https://gitdocumentatie.logius.nl/publicatie/api/beheermodel/">The Governance of this standard</a> is described by the API-Standaarden beheermodel in a <a href="https://github.com/Logius-standaarden/API-Standaarden-Beheermodel/">separate repository</a> and published by Logius.
        This document is part of the <em>Nederlandse API Strategie</em>, which consists of <a href="https://www.geonovum.nl/themas/kennisplatform-apis#APIStrategie">a set of documents</a>.</p>
    </section>
    <section class="notoc" id="conformance"><div class="header-wrapper"><h2 id="conformance-0">Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for this Section"></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST NOT</em>, and <em class="rfc2119">SHOULD</em> in this document
            are to be interpreted as described in
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all capitals, as shown here.
        </p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p>This is the definitive version of this document. Edits resulting from consultations have been applied.</p></section>
    <nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#goal"><bdi class="secno">1.1 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#status"><bdi class="secno">1.2 </bdi>Status</a></li><li class="tocline"><a class="tocxref" href="#authors"><bdi class="secno">1.3 </bdi>Authors</a></li><li class="tocline"><a class="tocxref" href="#reading-guide"><bdi class="secno">1.4 </bdi>Reading Guide</a></li><li class="tocline"><a class="tocxref" href="#extensions"><bdi class="secno">1.5 </bdi>Extensions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#summary"><bdi class="secno">2. </bdi>Summary</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-design-rules"><bdi class="secno">2.1 </bdi>Normative Design Rules</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#list-of-functional-rules"><bdi class="secno">2.1.1 </bdi>List of functional rules</a></li><li class="tocline"><a class="tocxref" href="#list-of-technical-rules"><bdi class="secno">2.1.2 </bdi>List of technical rules</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#the-core-set-of-design-rules"><bdi class="secno">3. </bdi>The core set of Design Rules</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#resources"><bdi class="secno">3.1 </bdi>Resources</a></li><li class="tocline"><a class="tocxref" href="#http-methods"><bdi class="secno">3.2 </bdi>HTTP methods</a></li><li class="tocline"><a class="tocxref" href="#statelessness"><bdi class="secno">3.3 </bdi>Statelessness</a></li><li class="tocline"><a class="tocxref" href="#relationships"><bdi class="secno">3.4 </bdi>Relationships</a></li><li class="tocline"><a class="tocxref" href="#operations"><bdi class="secno">3.5 </bdi>Operations</a></li><li class="tocline"><a class="tocxref" href="#documentation"><bdi class="secno">3.6 </bdi>Documentation</a></li><li class="tocline"><a class="tocxref" href="#versioning"><bdi class="secno">3.7 </bdi>Versioning</a></li><li class="tocline"><a class="tocxref" href="#transport-security"><bdi class="secno">3.8 </bdi>Transport Security</a></li><li class="tocline"><a class="tocxref" href="#geospatial"><bdi class="secno">3.9 </bdi>Geospatial</a></li></ol></li><li class="tocline"><a class="tocxref" href="#glossary"><bdi class="secno">4. </bdi>Glossary</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.2 </bdi>Informative references</a></li></ol></li></ol></nav>
    <div>
        <!-- Status table omitted for brevity -->
    </div>

    <section class="informative" id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div><p><em>This section is non-normative.</em></p>
        <section id="goal"><div class="header-wrapper"><h3 id="x1-1-goal"><bdi class="secno">1.1 </bdi>Goal</h3><a class="self-link" href="#goal" aria-label="Permalink for Section 1.1"></a></div>
        <p>More and more governmental organizations offer REST APIs (henceforth abbreviated as APIs), in addition to existing interfaces like SOAP and WFS. These APIs aim to be developer-friendly and easy to implement. While this is a commendable aim, it does not shield a developer from a steep learning curve getting to know every new API, in particular when every individual API is designed using different patterns and conventions.</p>
        <p>This document aims to describe a widely applicable set of design rules for the unambiguous provisioning of REST APIs. The primary goal is to offer guidance for organizations designing new APIs, with the purpose of increasing developer experience (DX) and interoperability between APIs. Hopefully, many organizations will adopt these design rules in their corporate API strategies and provide feedback about exceptions and additions to subsequently improve these design rules.</p>
        </section><section id="status"><div class="header-wrapper"><h3 id="x1-2-status"><bdi class="secno">1.2 </bdi>Status</h3><a class="self-link" href="#status" aria-label="Permalink for Section 1.2"></a></div>
        <p>This version of the design rules has been submitted to Forum Standaardisatie for inclusion on the Comply or Explain list of mandatory standards in the Dutch Public Sector. This document originates from the document <a href="https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-20190715/">API Strategie voor de Nederlandse Overheid</a>, which was recently split into separate sub-documents.</p>
        </section><section id="authors"><div class="header-wrapper"><h3 id="x1-3-authors"><bdi class="secno">1.3 </bdi>Authors</h3><a class="self-link" href="#authors" aria-label="Permalink for Section 1.3"></a></div>
        <p>Despite the fact that two authors are mentioned in the list of authors, this document is the result of a collaborative effort by the members of the <em>API Design Rules Working Group</em>.</p>
        </section><section id="reading-guide"><div class="header-wrapper"><h3 id="x1-4-reading-guide"><bdi class="secno">1.4 </bdi>Reading Guide</h3><a class="self-link" href="#reading-guide" aria-label="Permalink for Section 1.4"></a></div>
        <p>This document is part of the <em>Nederlandse API Strategie</em>.</p>
        <p>The Nederlandse API Strategie consists of <a href="https://www.geonovum.nl/themas/kennisplatform-apis#APIStrategie">a set of distinct documents</a>.</p>
        <!-- Table of NL API Strategie docs omitted for brevity -->
        <p>Before reading this document it is advised to gain knowledge of the informative documents, in particular the <a href="https://geonovum.github.io/KP-APIs/API-strategie-algemeen/Architectuur/">Architecture</a>.</p>
        <p>An overview of all current documents is available in this Dutch infographic:</p>
        <figure id="fig-nl-api-strategie-infographic">
        <object data="https://geonovum.github.io/KP-APIs/media/API_infographic.svg" type="image/svg+xml" id="infographic">NL API Strategie Infographic</object>
        <figcaption><a class="self-link" href="#fig-nl-api-strategie-infographic">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">NL API Strategie Infographic</span></figcaption>
        </figure>

        </section><section id="extensions"><div class="header-wrapper"><h3 id="x1-5-extensions"><bdi class="secno">1.5 </bdi>Extensions</h3><a class="self-link" href="#extensions" aria-label="Permalink for Section 1.5"></a></div>
        <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div><aside class="">
        In addition to this (normative) document, separate modules are being written to provide a set of extensions. These modules are all separate documents and exists in a <a href="https://geonovum.github.io/KP-APIs/">latest editor's draft</a> (<i>Werkversie</i> in Dutch). The latest editor's draft is actively being worked on and can be found on <a href="https://github.com/Geonovum/KP-APIs">GitHub</a>. It contains the most recent changes.
        </aside></div></section>
    </section>
    <section id="summary"><div class="header-wrapper"><h2 id="x2-summary"><bdi class="secno">2. </bdi>Summary</h2><a class="self-link" href="#summary" aria-label="Permalink for Section 2."></a></div>
        <section id="normative-design-rules"><div class="header-wrapper"><h3 id="x2-1-normative-design-rules"><bdi class="secno">2.1 </bdi>Normative Design Rules</h3><a class="self-link" href="#normative-design-rules" aria-label="Permalink for Section 2.1"></a></div>
        <p>Design rules can be technical rules, which should be tested automatically and functional rules which should be considerd when designing and building the api.</p>
        <section id="list-of-functional-rules"><div class="header-wrapper"><h4 id="x2-1-1-list-of-functional-rules"><bdi class="secno">2.1.1 </bdi>List of functional rules</h4><a class="self-link" href="#list-of-functional-rules" aria-label="Permalink for Section 2.1.1"></a></div>
         <!-- List omitted for brevity -->
        </section><section id="list-of-technical-rules"><div class="header-wrapper"><h4 id="x2-1-2-list-of-technical-rules"><bdi class="secno">2.1.2 </bdi>List of technical rules</h4><a class="self-link" href="#list-of-technical-rules" aria-label="Permalink for Section 2.1.2"></a></div>
         <!-- List omitted for brevity -->
        </section>
        </section>
    </section>
    <section id="the-core-set-of-design-rules"><div class="header-wrapper"><h2 id="x3-the-core-set-of-design-rules"><bdi class="secno">3. </bdi>The core set of Design Rules</h2><a class="self-link" href="#the-core-set-of-design-rules" aria-label="Permalink for Section 3."></a></div>
        <!-- Sections 3.1 to 3.9 content omitted for brevity, keep the structure if needed -->
        <section id="resources"><div class="header-wrapper"><h3 id="x3-1-resources"><bdi class="secno">3.1 </bdi>Resources</h3><a class="self-link" href="#resources" aria-label="Permalink for Section 3.1"></a></div>...</section>
        <section id="http-methods"><div class="header-wrapper"><h3 id="x3-2-http-methods"><bdi class="secno">3.2 </bdi>HTTP methods</h3><a class="self-link" href="#http-methods" aria-label="Permalink for Section 3.2"></a></div>...</section>
        <section id="statelessness"><div class="header-wrapper"><h3 id="x3-3-statelessness"><bdi class="secno">3.3 </bdi>Statelessness</h3><a class="self-link" href="#statelessness" aria-label="Permalink for Section 3.3"></a></div>...</section>
        <section id="relationships"><div class="header-wrapper"><h3 id="x3-4-relationships"><bdi class="secno">3.4 </bdi>Relationships</h3><a class="self-link" href="#relationships" aria-label="Permalink for Section 3.4"></a></div>...</section>
        <section id="operations"><div class="header-wrapper"><h3 id="x3-5-operations"><bdi class="secno">3.5 </bdi>Operations</h3><a class="self-link" href="#operations" aria-label="Permalink for Section 3.5"></a></div>...</section>
        <section id="documentation"><div class="header-wrapper"><h3 id="x3-6-documentation"><bdi class="secno">3.6 </bdi>Documentation</h3><a class="self-link" href="#documentation" aria-label="Permalink for Section 3.6"></a></div>...</section>
        <section id="versioning"><div class="header-wrapper"><h3 id="x3-7-versioning"><bdi class="secno">3.7 </bdi>Versioning</h3><a class="self-link" href="#versioning" aria-label="Permalink for Section 3.7"></a></div>...</section>
        <section id="transport-security"><div class="header-wrapper"><h3 id="x3-8-transport-security"><bdi class="secno">3.8 </bdi>Transport Security</h3><a class="self-link" href="#transport-security" aria-label="Permalink for Section 3.8"></a></div>...</section>
        <section id="geospatial"><div class="header-wrapper"><h3 id="x3-9-geospatial"><bdi class="secno">3.9 </bdi>Geospatial</h3><a class="self-link" href="#geospatial" aria-label="Permalink for Section 3.9"></a></div>...</section>
    </section>
    <section id="glossary"><div class="header-wrapper"><h2 id="x4-glossary"><bdi class="secno">4. </bdi>Glossary</h2><a class="self-link" href="#glossary" aria-label="Permalink for Section 4."></a></div>
       <!-- Glossary definitions omitted for brevity -->
    </section>


    <section id="references" class="appendix"><div class="header-wrapper"><h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix A."></a></div>
        <section id="normative-references">
            <div class="header-wrapper"><h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix A.1"></a></div>
            <dl>
            <!-- Bibliography omitted for brevity -->
            </dl>
        </section><section id="informative-references">
            <div class="header-wrapper"><h3 id="a-2-informative-references"><bdi class="secno">A.2 </bdi>Informative references</h3><a class="self-link" href="#informative-references" aria-label="Permalink for Appendix A.2"></a></div>
             <dl>
             <!-- Bibliography omitted for brevity -->
             </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <!-- DFN panels omitted for brevity -->
    {% verbatim %}
    <script id="respec-dfn-panel">(() => { /* Respec DFN Panel script omitted for brevity */ })()</script>
    {% endverbatim %}
    <div class="sidelabel">Logius Standard - Definitive version</div>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>


    <!-- START: Chat Sidebar HTML -->
    <!-- Chat Toggle Button -->
    <button id="chat-toggle-button" aria-label="Chat openen">💬</button> <!-- Aangepast aria-label -->

    <!-- Chat Sidebar -->
    <aside id="chat-sidebar" aria-hidden="true">
        <div id="chat-header">
            <span>Logius Standaarden Chatbot</span>
            <button id="chat-close-button" aria-label="Chat sluiten">×</button> <!-- Aangepast aria-label -->
        </div>
        <div id="chat-messages">
            <!-- Initial message will be added by JS -->
        </div>
        <div id="chat-input-area">
            <textarea id="chat-input" placeholder="Typ uw vraag..." rows="1" aria-label="Chat invoerveld"></textarea> <!-- Aangepast aria-label -->
            <!-- Optional: Add a send button if needed and enabled in JS -->
            <!-- <button id="chat-send-button" aria-label="Bericht versturen">Verstuur</button> -->
        </div>

        <!-- START: AI Disclaimer (Inside Sidebar) -->
        <div id="chat-disclaimer"> 
            <p>Antwoorden zijn automatisch gegenereerd. </p> <!-- Aangepaste tekst -->
            <p>Controleer de juistheid en raadpleeg de bronnen.</p> <!-- Aangepaste tekst -->
        </div>
        <!-- END: AI Disclaimer (Inside Sidebar) -->

        <!-- START: Sources Popup (Modal) -->
        <div id="sources-popup" class="popup-overlay" role="dialog" aria-modal="true" aria-labelledby="sources-popup-title">
            <div class="popup-content">
                <h3 id="sources-popup-title">Bronnen</h3>
                <ul id="sources-list">
                    <!-- Source items will be dynamically added here -->
                </ul>
                <button id="sources-popup-close" aria-label="Bronnen sluiten">×</button> <!-- Aangepast aria-label -->
            </div>
        </div>
        <!-- END: Sources Popup (Modal) -->

    </aside>
    <!-- END: Chat Sidebar HTML -->

    <!-- START: Chat Sidebar JavaScript -->
    <script>
    (function() {
        // --- DOM Elements ---
        const toggleButton = document.getElementById('chat-toggle-button');
        const sidebar = document.getElementById('chat-sidebar');
        const closeButton = document.getElementById('chat-close-button');
        const messagesContainer = document.getElementById('chat-messages');
        const inputField = document.getElementById('chat-input');
        const chatDisclaimer = document.getElementById('chat-disclaimer');
        // const sendButton = document.getElementById('chat-send-button');

        // Sources Popup Elements
        const sourcesPopup = document.getElementById('sources-popup');
        const sourcesList = document.getElementById('sources-list');
        const sourcesPopupClose = document.getElementById('sources-popup-close');

        // --- State ---
        let isOpen = false;
        let chatId = null; // Will be set by initChatSession
        let isLoading = false; // For send/receive message operations
        let hasInteracted = false;
        let isSessionInitialized = false; // True if chatId is set and (history loaded or new session created)
        let isInitializingSession = false; // True while initChatSession is running

        // --- Configuration ---
        const API_BASE_URL = 'http://localhost:8000/api';
        const CHAT_ID_STORAGE_KEY = 'logiusChatId';
        const CHAT_EXPIRY_STORAGE_KEY = 'logiusChatExpiry';
        const CHAT_SESSION_DURATION_MS = 55 * 60 * 1000; 

        // --- Helper Functions ---
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');

        function addMessageToChat(text, sender, docs = null) {
            hideLoader();
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(sender === 'user' ? 'user-message' : sender === 'assistant' ? 'assistant-message' : 'error-message');
            
            // Sanitize text before setting innerHTML to prevent XSS
            // A simple textContent assignment is safer if no HTML is intended from the LLM.
            // If HTML (like bold/italic from markdown) is desired, a more robust sanitizer is needed.
            // For now, we'll keep the simple replace, assuming LLM output is trusted or simple markdown.
            let sanitizedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            sanitizedText = sanitizedText.replace(/\*(.*?)\*/g, '<em>$1</em>');
            sanitizedText = sanitizedText.replace(/\n/g, '<br>');
            messageElement.innerHTML = sanitizedText;

            messagesContainer.appendChild(messageElement);

            if (sender === 'assistant' && docs && docs.length > 0) {
                const viewSourcesButton = document.createElement('button');
                viewSourcesButton.textContent = `Bekijk Bronnen (${docs.length})`;
                viewSourcesButton.classList.add('view-sources-button');
                viewSourcesButton.setAttribute('data-sources', JSON.stringify(docs));
                // Add aria-describedby if the message has an ID, for better context for screen readers
                // Example: messageElement.id = `msg-${new Date().getTime()}`; 
                // viewSourcesButton.setAttribute('aria-describedby', messageElement.id);
                messageElement.insertAdjacentElement('afterend', viewSourcesButton);
            }
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showLoader() {
            if (!messagesContainer.querySelector('.loader')) {
                const loader = document.createElement('div');
                loader.className = 'loader';
                loader.setAttribute('aria-label', 'Bezig met laden'); // Dutch label
                messagesContainer.appendChild(loader);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        function hideLoader() {
            const loader = messagesContainer.querySelector('.loader');
            if (loader) messagesContainer.removeChild(loader);
        }

        function showSourcesPopup(docs) {
            sourcesList.innerHTML = '';
            if (!docs || docs.length === 0) {
                sourcesList.innerHTML = '<li>Geen bronnen beschikbaar voor dit antwoord.</li>';
            } else {
                docs.forEach((doc, index) => {
                    const li = document.createElement('li');

                    let sourceTitleText = `Bron ${index + 1}`;
                    let subHeaderText = doc.doc_tag && doc.doc_tag.toLowerCase() !== 'adr' ? `Document: ${doc.doc_tag}` : null;

                    if (doc.file_path && doc.file_path.includes('#')) {
                        const parts = doc.file_path.split('#');
                        const anchor = parts[1];
                        sourceTitleText = anchor.replace(/-/g, ' ').replace(/_/g, ' ');
                        sourceTitleText = sourceTitleText.split(' ')
                                              .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
                                              .join(' ');
                        const baseFileName = parts[0].replace(/\.md$/, '').replace(/^[0-9]+-/,'').trim();
                        if (baseFileName && baseFileName.toLowerCase() !== 'adr' && baseFileName.length > 0) {
                             subHeaderText = `Uit: ${baseFileName.replace(/-/g, ' ')}`;
                        }
                    } else if (doc.doc_tag && doc.doc_tag.toLowerCase() !== 'adr' && doc.doc_tag.trim().length > 0) {
                        // Fallback if no anchor, use doc_tag if it's specific
                        sourceTitleText = `Informatie uit ${doc.doc_tag.trim()}`;
                        subHeaderText = null; // Avoid redundancy
                    }
                    
                    const titleElement = document.createElement('h4'); // Changed to h4 for semantic structure in popup
                    titleElement.classList.add('source-item-title');
                    titleElement.textContent = sourceTitleText;
                    li.appendChild(titleElement);

                    if (subHeaderText) {
                        const subHeaderElement = document.createElement('p');
                        subHeaderElement.classList.add('source-item-subheader');
                        subHeaderElement.textContent = subHeaderText;
                        li.appendChild(subHeaderElement);
                    }

                    if (doc.content_snippet) {
                        const snippetElement = document.createElement('p');
                        snippetElement.classList.add('source-item-snippet');
                        let snippetText = doc.content_snippet;
                        snippetText = snippetText.replace(/^#+\s+/, '').replace(/\*\*(.*?)\*\*/g, '$1').replace(/\*(.*?)\*/g, '$1').replace(/\[(.*?)\]\(.*?\)/g, '$1');
                        snippetElement.textContent = snippetText.trim();
                        li.appendChild(snippetElement);
                    }

                    if (doc.chunk_url) {
                        const linkElement = document.createElement('a');
                        linkElement.href = doc.chunk_url;
                        linkElement.textContent = `Bekijk deze sectie in het document`;
                        linkElement.target = '_blank';
                        linkElement.rel = 'noopener noreferrer'; // Security for _blank
                        linkElement.classList.add('source-item-link');
                        li.appendChild(linkElement);
                    } else {
                        const noLinkSpan = document.createElement('span');
                        noLinkSpan.textContent = 'Geen directe link naar sectie beschikbaar.';
                        noLinkSpan.classList.add('source-item-no-link');
                        li.appendChild(noLinkSpan);
                    }
                    sourcesList.appendChild(li);
                });
            }
            sourcesPopup.classList.add('visible');
            sourcesPopupClose.focus(); // Set focus to the close button in the popup
        }

        function hideSourcesPopup() {
             sourcesPopup.classList.remove('visible');
             if (isOpen) inputField.focus(); // Return focus to input field if chat is open
        }

        async function _createNewChatSessionOnBackend() {
            try {
                const response = await fetch(`${API_BASE_URL}/chat/session/`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json', 'X-CSRFToken': csrftoken },
                    body: JSON.stringify({})
                });
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ error: "Serverfout bij aanmaken sessie." }));
                    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                return data; // Returns { chat_id: "..." }
            } catch (error) {
                console.error("Fout bij aanmaken nieuwe chatsessie op backend:", error);
                return null;
            }
        }

        async function fetchAndDisplayHistory(sessionId) {
            messagesContainer.innerHTML = ''; 
            showLoader();
            try {
                const response = await fetch(`${API_BASE_URL}/chat/history/${sessionId}/`, {
                    method: 'GET',
                    headers: { 'X-CSRFToken': csrftoken }
                });
                hideLoader(); 
                if (!response.ok) {
                    console.warn(`Geschiedenis niet gevonden voor sessie ${sessionId} (status: ${response.status}).`);
                    return false; 
                }
                const data = await response.json();
                if (data.history && Array.isArray(data.history)) {
                    messagesContainer.innerHTML = ''; 
                    data.history.forEach(msg => {
                        if (typeof msg.role === 'string' && typeof msg.content === 'string') {
                            addMessageToChat(msg.content, msg.role);
                        }
                    });
                    if (data.history.length > 0) {
                        hasInteracted = true; 
                        if (chatDisclaimer) chatDisclaimer.style.display = 'block';
                    }
                    return true;
                }
                return false;
            } catch (error) {
                hideLoader();
                console.error("Fout bij ophalen of weergeven chatgeschiedenis:", error);
                return false;
            }
        }

        async function initChatSession() {
            const storedChatId = localStorage.getItem(CHAT_ID_STORAGE_KEY);
            const storedExpiry = localStorage.getItem(CHAT_EXPIRY_STORAGE_KEY);
            const currentTime = new Date().getTime();

            if (storedChatId && storedExpiry && currentTime < parseInt(storedExpiry)) {
                chatId = storedChatId;
                const historyLoaded = await fetchAndDisplayHistory(chatId);
                if (historyLoaded) {
                    isSessionInitialized = true;
                    if (messagesContainer.children.length === 0 || 
                        (messagesContainer.children.length === 1 && messagesContainer.querySelector('.loader'))) {
                        addMessageToChat("Waarmee kan ik u helpen met betrekking tot de standaarden in dit document?", 'assistant');
                    }
                    return true;
                } else {
                    localStorage.removeItem(CHAT_ID_STORAGE_KEY);
                    localStorage.removeItem(CHAT_EXPIRY_STORAGE_KEY);
                    chatId = null;
                }
            } else {
                localStorage.removeItem(CHAT_ID_STORAGE_KEY);
                localStorage.removeItem(CHAT_EXPIRY_STORAGE_KEY);
            }
            
            messagesContainer.innerHTML = '';
            showLoader();
            const newSessionData = await _createNewChatSessionOnBackend();
            hideLoader();

            if (newSessionData && newSessionData.chat_id) {
                chatId = newSessionData.chat_id;
                const expiryTime = new Date().getTime() + CHAT_SESSION_DURATION_MS;
                localStorage.setItem(CHAT_ID_STORAGE_KEY, chatId);
                localStorage.setItem(CHAT_EXPIRY_STORAGE_KEY, expiryTime.toString());
                isSessionInitialized = true;
                messagesContainer.innerHTML = ''; 
                addMessageToChat("Waarmee kan ik u helpen met betrekking tot de standaarden in dit document?", 'assistant');
                return true;
            } else {
                messagesContainer.innerHTML = '';
                addMessageToChat("Kon geen chatsessie starten. Probeer het later opnieuw alstublieft.", 'error');
                isSessionInitialized = false;
                chatId = null;
                return false;
            }
        }

        async function sendMessage(message) {
            if (!isSessionInitialized || !chatId) {
                 addMessageToChat("Chatsessie is niet actief. Sluit en open de chat opnieuw alstublieft.", 'error');
                 return;
            }
            if (isLoading || !message.trim()) return;

            if (!hasInteracted) {
                hasInteracted = true;
                if (chatDisclaimer) chatDisclaimer.style.display = 'block';
            }

            isLoading = true;
            inputField.disabled = true;
            addMessageToChat(message, 'user');
            inputField.value = '';
            inputField.style.height = 'auto'; 
            inputField.style.height = inputField.scrollHeight + 'px';
            showLoader();

            try {
                const response = await fetch(`${API_BASE_URL}/chat/`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrftoken },
                    body: JSON.stringify({ query: message, chat_id: chatId })
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ error: "Onbekende serverfout" }));
                    throw new Error(errorData.error || `HTTP-fout! Status: ${response.status}`);
                }
                const data = await response.json();
                if (data.response) {
                    addMessageToChat(data.response, 'assistant', data.docs || []);
                } else if (data.error) {
                    addMessageToChat(data.error, 'error');
                } else {
                     addMessageToChat("Onverwacht antwoord van de server ontvangen.", 'error');
                }
            } catch (error) {
                hideLoader();
                addMessageToChat(`Fout: ${error.message || "Kon geen verbinding maken met de server."}`, 'error');
            } finally {
                isLoading = false;
                inputField.disabled = false;
                if (isOpen) inputField.focus(); // Only focus if sidebar is open
            }
        }

        async function toggleChat() {
            if (isInitializingSession) return;

            if (isOpen) {
                sidebar.classList.remove('is-open');
                sidebar.setAttribute('aria-hidden', 'true');
                toggleButton.setAttribute('aria-label', 'Chat openen');
                hideSourcesPopup(); 
                isOpen = false;
            } else { 
                isInitializingSession = true;
                toggleButton.disabled = true;
                toggleButton.setAttribute('aria-label', 'Chat wordt geladen');


                if (!isSessionInitialized) { 
                    const success = await initChatSession();
                    if (!success) {
                        isInitializingSession = false;
                        toggleButton.disabled = false; 
                        toggleButton.setAttribute('aria-label', 'Chat openen (fout bij laden)');
                        return;
                    }
                }
                
                sidebar.classList.add('is-open');
                sidebar.setAttribute('aria-hidden', 'false');
                toggleButton.setAttribute('aria-label', 'Chat sluiten');
                isOpen = true;
                inputField.focus();
                messagesContainer.scrollTop = messagesContainer.scrollHeight; 

                isInitializingSession = false;
                toggleButton.disabled = false; 
            }
        }

        function handleInputKeypress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                const message = inputField.value.trim();
                if (message) sendMessage(message);
            }
        }

        function handleInputInput() {
             inputField.style.height = 'auto';
             inputField.style.height = (inputField.scrollHeight < 44 ? 44 : inputField.scrollHeight) + 'px'; // Ensure min-height
        }

        toggleButton.addEventListener('click', toggleChat);
        closeButton.addEventListener('click', toggleChat); 
        inputField.addEventListener('keypress', handleInputKeypress);
        inputField.addEventListener('input', handleInputInput);

        sourcesPopupClose.addEventListener('click', hideSourcesPopup);
        sourcesPopup.addEventListener('click', (event) => {
            if (event.target === sourcesPopup) hideSourcesPopup(); 
        });
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                if (sourcesPopup.classList.contains('visible')) {
                    hideSourcesPopup();
                } else if (isOpen) {
                     // Optionally close chat on Escape if popup is not open
                     // toggleChat(); 
                }
            }
        });

        messagesContainer.addEventListener('click', (event) => {
            const button = event.target.closest('.view-sources-button'); // Use closest to handle clicks on children
            if (button) {
                 try {
                    const sourcesData = JSON.parse(button.getAttribute('data-sources'));
                    showSourcesPopup(sourcesData);
                 } catch (e) {
                    console.error("Fout bij parsen brongegevens:", e);
                    alert("Kon de bronnen niet laden.");
                 }
            }
        });

        document.addEventListener('click', (event) => {
             if (isOpen && !sidebar.contains(event.target) && !toggleButton.contains(event.target)) {
                 if (!event.target.closest('.popup-overlay') && !event.target.closest('.view-sources-button')) {
                     if (!event.target.closest('.dfn-panel') && !event.target.closest('dfn, .index-term')) {
                         // toggleChat(); // Decided against closing on outside click for now, can be distracting
                     }
                 }
            }
        });

        sidebar.classList.remove('is-open');
        sidebar.setAttribute('aria-hidden', 'true');
        sourcesPopup.classList.remove('visible');
        toggleButton.setAttribute('aria-label', 'Chat openen');
        if(chatDisclaimer) chatDisclaimer.style.display = 'none';

    })(); 
    </script>
    <!-- END: Chat Sidebar JavaScript -->

</body>
</html>